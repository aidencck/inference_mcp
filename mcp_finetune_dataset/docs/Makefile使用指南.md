# Makefileä½¿ç”¨æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»MCPå¾®è°ƒé¡¹ç›®ä¸­Makefileçš„ä½¿ç”¨æ–¹æ³•å’Œç®¡ç†å‘½ä»¤ã€‚

## ğŸ“‹ ç›®å½•

- [æ¦‚è¿°](#æ¦‚è¿°)
- [å‰ç½®è¦æ±‚](#å‰ç½®è¦æ±‚)
- [å‘½ä»¤åˆ†ç±»](#å‘½ä»¤åˆ†ç±»)
- [è¯¦ç»†å‘½ä»¤è¯´æ˜](#è¯¦ç»†å‘½ä»¤è¯´æ˜)
- [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

## æ¦‚è¿°

Makefileæä¾›äº†ä¸€å¥—å®Œæ•´çš„Dockerå®¹å™¨ç®¡ç†å‘½ä»¤ï¼Œç®€åŒ–äº†å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²çš„å·¥ä½œæµç¨‹ã€‚é€šè¿‡æ ‡å‡†åŒ–çš„å‘½ä»¤æ¥å£ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿæ‰§è¡Œå¸¸è§æ“ä½œã€‚

### æ ¸å¿ƒä¼˜åŠ¿

- **ç»Ÿä¸€æ¥å£**: æ‰€æœ‰æ“ä½œé€šè¿‡`make`å‘½ä»¤æ‰§è¡Œ
- **è‡ªåŠ¨åŒ–**: å¤æ‚æ“ä½œä¸€é”®å®Œæˆ
- **å¯æ‰©å±•**: æ˜“äºæ·»åŠ æ–°çš„ç®¡ç†å‘½ä»¤
- **è·¨å¹³å°**: åœ¨æ”¯æŒMakeçš„ç³»ç»Ÿä¸Šé€šç”¨

## å‰ç½®è¦æ±‚

### ç³»ç»Ÿè¦æ±‚

- **Makeå·¥å…·**: GNU Make 3.81+
- **Docker**: Docker Engine 20.10+
- **Docker Compose**: 2.0+
- **æ“ä½œç³»ç»Ÿ**: Linux, macOS, Windows (WSL2)

### å®‰è£…éªŒè¯

```bash
# æ£€æŸ¥Makeç‰ˆæœ¬
make --version

# æ£€æŸ¥Dockerç‰ˆæœ¬
docker --version
docker-compose --version

# éªŒè¯GPUæ”¯æŒï¼ˆå¯é€‰ï¼‰
nvidia-smi
```

## å‘½ä»¤åˆ†ç±»

### ğŸ—ï¸ æ„å»ºç›¸å…³

| å‘½ä»¤ | æè¿° | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| `make build` | æ„å»ºDockeré•œåƒ | é¦–æ¬¡éƒ¨ç½²æˆ–ä»£ç æ›´æ–°å |
| `make build-no-cache` | æ— ç¼“å­˜æ„å»ºé•œåƒ | ä¾èµ–æ›´æ–°æˆ–æ„å»ºé—®é¢˜ |
| `make build-jupyter` | æ„å»ºJupyteré•œåƒ | å¼€å‘ç¯å¢ƒéœ€è¦ |

### ğŸš€ å®¹å™¨ç®¡ç†

| å‘½ä»¤ | æè¿° | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| `make up` | å¯åŠ¨æ‰€æœ‰æœåŠ¡ | å®Œæ•´ç¯å¢ƒå¯åŠ¨ |
| `make down` | åœæ­¢æ‰€æœ‰æœåŠ¡ | ç¯å¢ƒæ¸…ç† |
| `make start` | å¯åŠ¨è®­ç»ƒå®¹å™¨ | å•ç‹¬å¯åŠ¨ä¸»å®¹å™¨ |
| `make stop` | åœæ­¢è®­ç»ƒå®¹å™¨ | å•ç‹¬åœæ­¢ä¸»å®¹å™¨ |
| `make restart` | é‡å¯è®­ç»ƒå®¹å™¨ | é…ç½®æ›´æ–°å |

### ğŸ› ï¸ å¼€å‘å·¥å…·

| å‘½ä»¤ | æè¿° | è®¿é—®åœ°å€ |
|------|------|----------|
| `make shell` | è¿›å…¥å®¹å™¨Shell | å‘½ä»¤è¡Œäº¤äº’ |
| `make logs` | æŸ¥çœ‹å®¹å™¨æ—¥å¿— | è°ƒè¯•å’Œç›‘æ§ |
| `make jupyter` | å¯åŠ¨JupyteræœåŠ¡ | http://localhost:8889 |
| `make tensorboard` | å¯åŠ¨TensorBoard | http://localhost:6007 |

### ğŸ¯ è®­ç»ƒå’Œæµ‹è¯•

| å‘½ä»¤ | æè¿° | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| `make train` | è¿è¡Œè®­ç»ƒè„šæœ¬ | æ¨¡å‹è®­ç»ƒ |
| `make test` | è¿è¡Œæµ‹è¯•å¥—ä»¶ | ä»£ç éªŒè¯ |
| `make health` | å¥åº·æ£€æŸ¥ | ç³»ç»Ÿè¯Šæ–­ |
| `make inference` | æ¨ç†æµ‹è¯• | æ¨¡å‹éªŒè¯ |

### ğŸ”§ ç»´æŠ¤æ¸…ç†

| å‘½ä»¤ | æè¿° | æ³¨æ„äº‹é¡¹ |
|------|------|----------|
| `make status` | æŸ¥çœ‹å®¹å™¨çŠ¶æ€ | æ— é£é™© |
| `make clean` | æ¸…ç†å®¹å™¨å’Œé•œåƒ | âš ï¸ ä¼šåˆ é™¤æ•°æ® |
| `make clean-volumes` | æ¸…ç†æ•°æ®å· | âš ï¸ ä¼šåˆ é™¤æŒä¹…æ•°æ® |
| `make prune` | æ¸…ç†æœªä½¿ç”¨èµ„æº | é‡Šæ”¾ç£ç›˜ç©ºé—´ |

### ğŸ­ ç”Ÿäº§éƒ¨ç½²

| å‘½ä»¤ | æè¿° | ç¯å¢ƒ |
|------|------|------|
| `make prod-build` | æ„å»ºç”Ÿäº§é•œåƒ | ç”Ÿäº§ç¯å¢ƒ |
| `make prod-up` | å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ | ç”Ÿäº§ç¯å¢ƒ |
| `make prod-down` | åœæ­¢ç”Ÿäº§ç¯å¢ƒ | ç”Ÿäº§ç¯å¢ƒ |
| `make prod-logs` | æŸ¥çœ‹ç”Ÿäº§æ—¥å¿— | ç”Ÿäº§ç¯å¢ƒ |
| `make prod-status` | ç”Ÿäº§ç¯å¢ƒçŠ¶æ€ | ç”Ÿäº§ç¯å¢ƒ |

### ğŸ” ç›‘æ§è°ƒè¯•

| å‘½ä»¤ | æè¿° | ç”¨é€” |
|------|------|------|
| `make monitor` | èµ„æºç›‘æ§ | æ€§èƒ½åˆ†æ |
| `make gpu-status` | GPUçŠ¶æ€ | GPUç›‘æ§ |
| `make debug` | è°ƒè¯•æ¨¡å¼ | é—®é¢˜è¯Šæ–­ |

### ğŸ ä¾¿æ·åŠŸèƒ½

| å‘½ä»¤ | æè¿° | åŠŸèƒ½ |
|------|------|------|
| `make dev-setup` | ä¸€é”®å¼€å‘ç¯å¢ƒ | å¿«é€Ÿå¼€å§‹ |
| `make backup` | æ•°æ®å¤‡ä»½ | æ•°æ®ä¿æŠ¤ |
| `make update` | é¡¹ç›®æ›´æ–° | ç‰ˆæœ¬å‡çº§ |

## è¯¦ç»†å‘½ä»¤è¯´æ˜

### æ„å»ºç›¸å…³å‘½ä»¤

#### `make build`

**åŠŸèƒ½**: æ„å»ºä¸»è¦çš„Dockeré•œåƒ

```bash
make build
```

**æ‰§è¡Œæµç¨‹**:
1. æ£€æŸ¥Dockerç¯å¢ƒ
2. ä½¿ç”¨Dockerfileæ„å»ºé•œåƒ
3. æ ‡è®°ä¸º`mcp-finetune:latest`

**é€‚ç”¨åœºæ™¯**:
- é¦–æ¬¡éƒ¨ç½²é¡¹ç›®
- ä»£ç æˆ–ä¾èµ–æ›´æ–°å
- é•œåƒæŸåéœ€è¦é‡å»º

#### `make build-no-cache`

**åŠŸèƒ½**: æ— ç¼“å­˜æ„å»ºï¼Œå¼ºåˆ¶é‡æ–°ä¸‹è½½æ‰€æœ‰ä¾èµ–

```bash
make build-no-cache
```

**é€‚ç”¨åœºæ™¯**:
- ä¾èµ–åŒ…æ›´æ–°
- æ„å»ºç¼“å­˜é—®é¢˜
- åŸºç¡€é•œåƒæ›´æ–°

#### `make build-jupyter`

**åŠŸèƒ½**: æ„å»ºJupyterå¼€å‘ç¯å¢ƒé•œåƒ

```bash
make build-jupyter
```

**ç‰¹ç‚¹**:
- è½»é‡çº§é•œåƒ
- ä¸“é—¨ç”¨äºäº¤äº’å¼å¼€å‘
- åŒ…å«Jupyter Labå’Œå¸¸ç”¨æ‰©å±•

### å®¹å™¨ç®¡ç†å‘½ä»¤

#### `make up`

**åŠŸèƒ½**: å¯åŠ¨å®Œæ•´çš„æœåŠ¡æ ˆ

```bash
make up
```

**å¯åŠ¨çš„æœåŠ¡**:
- ä¸»è®­ç»ƒå®¹å™¨
- JupyteræœåŠ¡
- TensorBoardæœåŠ¡

**ç­‰æ•ˆå‘½ä»¤**:
```bash
docker-compose up -d
```

#### `make start`

**åŠŸèƒ½**: ä»…å¯åŠ¨ä¸»è®­ç»ƒå®¹å™¨

```bash
make start
```

**ç‰¹ç‚¹**:
- åŒ…å«GPUæ”¯æŒæ£€æŸ¥
- è‡ªåŠ¨åˆ›å»ºå¿…è¦ç›®å½•
- æ”¯æŒæ•°æ®å·æŒ‚è½½

#### `make restart`

**åŠŸèƒ½**: é‡å¯è®­ç»ƒå®¹å™¨

```bash
make restart
```

**ä½¿ç”¨åœºæ™¯**:
- é…ç½®æ–‡ä»¶æ›´æ–°å
- å®¹å™¨çŠ¶æ€å¼‚å¸¸
- å†…å­˜æ³„æ¼æ¸…ç†

### å¼€å‘å·¥å…·å‘½ä»¤

#### `make shell`

**åŠŸèƒ½**: è¿›å…¥å®¹å™¨çš„äº¤äº’å¼Shell

```bash
make shell
```

**ç‰¹ç‚¹**:
- ç›´æ¥è®¿é—®å®¹å™¨ç¯å¢ƒ
- å®Œæ•´çš„å¼€å‘å·¥å…·é“¾
- å®æ—¶ä»£ç è°ƒè¯•

**å¸¸ç”¨æ“ä½œ**:
```bash
# è¿›å…¥å®¹å™¨åå¯ä»¥æ‰§è¡Œ
python train.py
pip install new_package
vim config.yaml
```

#### `make jupyter`

**åŠŸèƒ½**: å¯åŠ¨Jupyter LabæœåŠ¡

```bash
make jupyter
```

**è®¿é—®ä¿¡æ¯**:
- **URL**: http://localhost:8889
- **Token**: mcp-training-2024

**åŠŸèƒ½ç‰¹æ€§**:
- ä»£ç ç¼–è¾‘å’Œæ‰§è¡Œ
- æ•°æ®å¯è§†åŒ–
- äº¤äº’å¼å¼€å‘
- å®æ—¶ç»“æœå±•ç¤º

#### `make tensorboard`

**åŠŸèƒ½**: å¯åŠ¨TensorBoardç›‘æ§æœåŠ¡

```bash
make tensorboard
```

**è®¿é—®ä¿¡æ¯**:
- **URL**: http://localhost:6007

**ç›‘æ§å†…å®¹**:
- è®­ç»ƒæŸå¤±æ›²çº¿
- æ¨¡å‹ç»“æ„å›¾
- å‚æ•°åˆ†å¸ƒ
- æ€§èƒ½æŒ‡æ ‡

### è®­ç»ƒå’Œæµ‹è¯•å‘½ä»¤

#### `make train`

**åŠŸèƒ½**: æ‰§è¡Œæ¨¡å‹è®­ç»ƒ

```bash
make train
```

**æ‰§è¡Œæµç¨‹**:
1. æ£€æŸ¥å®¹å™¨çŠ¶æ€
2. è¿›å…¥å®¹å™¨ç¯å¢ƒ
3. æ‰§è¡Œ`./run_training.sh`
4. å®æ—¶æ˜¾ç¤ºè®­ç»ƒæ—¥å¿—

**ç›‘æ§æ–¹æ³•**:
```bash
# å¦å¼€ç»ˆç«¯ç›‘æ§
make logs
make tensorboard
```

#### `make test`

**åŠŸèƒ½**: è¿è¡Œæµ‹è¯•å¥—ä»¶

```bash
make test
```

**æµ‹è¯•å†…å®¹**:
- å•å…ƒæµ‹è¯•
- é›†æˆæµ‹è¯•
- æ¨¡å‹éªŒè¯
- æ€§èƒ½æµ‹è¯•

#### `make health`

**åŠŸèƒ½**: ç³»ç»Ÿå¥åº·æ£€æŸ¥

```bash
make health
```

**æ£€æŸ¥é¡¹ç›®**:
- Pythonç¯å¢ƒ
- GPUå¯ç”¨æ€§
- ç£ç›˜ç©ºé—´
- å†…å­˜ä½¿ç”¨
- ç½‘ç»œè¿æ¥
- æ–‡ä»¶æƒé™
- é…ç½®æ–‡ä»¶
- è¿›ç¨‹çŠ¶æ€

#### `make inference`

**åŠŸèƒ½**: æ¨¡å‹æ¨ç†æµ‹è¯•

```bash
make inference
```

**ç‰¹ç‚¹**:
- äº¤äº’å¼æ¨ç†
- æ¨¡å‹æ€§èƒ½éªŒè¯
- ç»“æœè´¨é‡è¯„ä¼°

### ç»´æŠ¤æ¸…ç†å‘½ä»¤

#### `make status`

**åŠŸèƒ½**: æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€

```bash
make status
```

**æ˜¾ç¤ºä¿¡æ¯**:
- å®¹å™¨è¿è¡ŒçŠ¶æ€
- é•œåƒä¿¡æ¯
- æ•°æ®å·ä½¿ç”¨
- GPUçŠ¶æ€

#### `make clean`

**åŠŸèƒ½**: æ¸…ç†å®¹å™¨å’Œé•œåƒ

```bash
make clean
```

**âš ï¸ è­¦å‘Š**: æ­¤æ“ä½œä¼šåˆ é™¤:
- æ‰€æœ‰ç›¸å…³å®¹å™¨
- é¡¹ç›®é•œåƒ
- æœªå‘½åæ•°æ®å·

**ç¡®è®¤æµç¨‹**:
```bash
è­¦å‘Š: è¿™å°†åˆ é™¤æ‰€æœ‰ç›¸å…³å®¹å™¨å’Œé•œåƒ
ç¡®è®¤ç»§ç»­? (y/N): y
```

#### `make prune`

**åŠŸèƒ½**: æ¸…ç†æœªä½¿ç”¨çš„Dockerèµ„æº

```bash
make prune
```

**æ¸…ç†å†…å®¹**:
- åœæ­¢çš„å®¹å™¨
- æœªä½¿ç”¨çš„é•œåƒ
- æœªä½¿ç”¨çš„æ•°æ®å·
- æœªä½¿ç”¨çš„ç½‘ç»œ

### ç”Ÿäº§éƒ¨ç½²å‘½ä»¤

#### `make prod-build`

**åŠŸèƒ½**: æ„å»ºç”Ÿäº§ç¯å¢ƒé•œåƒ

```bash
make prod-build
```

**ç‰¹ç‚¹**:
- ä¼˜åŒ–çš„é•œåƒå¤§å°
- å®‰å…¨é…ç½®
- æ€§èƒ½ä¼˜åŒ–
- ç›‘æ§é›†æˆ

#### `make prod-up`

**åŠŸèƒ½**: å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ

```bash
make prod-up
```

**åŒ…å«æœåŠ¡**:
- è®­ç»ƒå®¹å™¨
- Prometheusç›‘æ§
- Fluentdæ—¥å¿—èšåˆ
- Nginxåå‘ä»£ç†

#### `make prod-status`

**åŠŸèƒ½**: æŸ¥çœ‹ç”Ÿäº§ç¯å¢ƒçŠ¶æ€

```bash
make prod-status
```

**ç›‘æ§æŒ‡æ ‡**:
- æœåŠ¡å¥åº·çŠ¶æ€
- èµ„æºä½¿ç”¨æƒ…å†µ
- æ€§èƒ½æŒ‡æ ‡
- é”™è¯¯æ—¥å¿—

### ä¾¿æ·åŠŸèƒ½å‘½ä»¤

#### `make dev-setup`

**åŠŸèƒ½**: ä¸€é”®è®¾ç½®å®Œæ•´å¼€å‘ç¯å¢ƒ

```bash
make dev-setup
```

**æ‰§è¡Œæ­¥éª¤**:
1. æ„å»ºæ‰€æœ‰é•œåƒ
2. å¯åŠ¨æœåŠ¡æ ˆ
3. å¯åŠ¨Jupyter Lab
4. æ˜¾ç¤ºè®¿é—®ä¿¡æ¯

**å®Œæˆåæç¤º**:
```
å¼€å‘ç¯å¢ƒè®¾ç½®å®Œæˆ
å¯ç”¨æœåŠ¡:
  - Jupyter Lab: http://localhost:8889 (Token: mcp-training-2024)
  - å®¹å™¨Shell: make shell
  - è®­ç»ƒ: make train
```

#### `make backup`

**åŠŸèƒ½**: å¤‡ä»½é‡è¦æ•°æ®

```bash
make backup
```

**å¤‡ä»½å†…å®¹**:
- æ¨¡å‹æ–‡ä»¶
- é…ç½®æ–‡ä»¶
- è®­ç»ƒæ—¥å¿—
- æ•°æ®é›†

**å¤‡ä»½ä½ç½®**: `backups/YYYYMMDD_HHMMSS/`

#### `make update`

**åŠŸèƒ½**: æ›´æ–°é¡¹ç›®åˆ°æœ€æ–°ç‰ˆæœ¬

```bash
make update
```

**æ›´æ–°æ­¥éª¤**:
1. æ‹‰å–æœ€æ–°ä»£ç 
2. æ›´æ–°åŸºç¡€é•œåƒ
3. é‡æ–°æ„å»ºé•œåƒ
4. é‡å¯æœåŠ¡

## ä½¿ç”¨åœºæ™¯

### ğŸš€ æ–°é¡¹ç›®å¼€å§‹

```bash
# 1. ä¸€é”®è®¾ç½®å¼€å‘ç¯å¢ƒ
make dev-setup

# 2. éªŒè¯ç¯å¢ƒ
make health

# 3. å¼€å§‹å¼€å‘
make shell
# æˆ–
open http://localhost:8889
```

### ğŸ”„ æ—¥å¸¸å¼€å‘æµç¨‹

```bash
# 1. å¯åŠ¨ç¯å¢ƒ
make start

# 2. å¼€å‘è°ƒè¯•
make jupyter
make shell

# 3. è¿è¡Œè®­ç»ƒ
make train

# 4. ç›‘æ§è®­ç»ƒ
make tensorboard
make logs

# 5. æµ‹è¯•éªŒè¯
make test
make inference

# 6. åœæ­¢ç¯å¢ƒ
make stop
```

### ğŸ­ ç”Ÿäº§éƒ¨ç½²æµç¨‹

```bash
# 1. æ„å»ºç”Ÿäº§é•œåƒ
make prod-build

# 2. å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ
make prod-up

# 3. éªŒè¯éƒ¨ç½²
make prod-status
make health

# 4. ç›‘æ§è¿è¡Œ
make prod-logs
make monitor
```

### ğŸ”§ ç»´æŠ¤å’Œæ•…éšœæ’é™¤

```bash
# 1. æ£€æŸ¥çŠ¶æ€
make status
make health

# 2. æŸ¥çœ‹æ—¥å¿—
make logs

# 3. é‡å¯æœåŠ¡
make restart

# 4. æ¸…ç†èµ„æº
make prune

# 5. å®Œå…¨é‡å»º
make clean
make build-no-cache
make start
```

### ğŸ“Š æ€§èƒ½ç›‘æ§

```bash
# 1. èµ„æºç›‘æ§
make monitor

# 2. GPUçŠ¶æ€
make gpu-status

# 3. è®­ç»ƒç›‘æ§
make tensorboard

# 4. ç³»ç»Ÿå¥åº·
make health
```

## æœ€ä½³å®è·µ

### ğŸ¯ å¼€å‘é˜¶æ®µ

1. **ç¯å¢ƒéš”ç¦»**
   ```bash
   # ä½¿ç”¨ç‹¬ç«‹çš„å¼€å‘ç¯å¢ƒ
   make dev-setup
   ```

2. **å¢é‡æ„å»º**
   ```bash
   # ä¼˜å…ˆä½¿ç”¨ç¼“å­˜æ„å»º
   make build
   
   # ä»…åœ¨å¿…è¦æ—¶æ— ç¼“å­˜æ„å»º
   make build-no-cache
   ```

3. **å®æ—¶ç›‘æ§**
   ```bash
   # å¼€å¯å¤šä¸ªç»ˆç«¯
   # ç»ˆç«¯1: è®­ç»ƒ
   make train
   
   # ç»ˆç«¯2: ç›‘æ§
   make logs
   
   # ç»ˆç«¯3: TensorBoard
   make tensorboard
   ```

### ğŸ­ ç”Ÿäº§é˜¶æ®µ

1. **èµ„æºç®¡ç†**
   ```bash
   # å®šæœŸæ¸…ç†
   make prune
   
   # ç›‘æ§èµ„æº
   make monitor
   ```

2. **æ•°æ®å¤‡ä»½**
   ```bash
   # å®šæœŸå¤‡ä»½
   make backup
   
   # éªŒè¯å¤‡ä»½
   ls -la backups/
   ```

3. **å¥åº·æ£€æŸ¥**
   ```bash
   # å®šæœŸå¥åº·æ£€æŸ¥
   make health
   
   # ç›‘æ§ç”Ÿäº§çŠ¶æ€
   make prod-status
   ```

### ğŸ”’ å®‰å…¨è€ƒè™‘

1. **æƒé™ç®¡ç†**
   ```bash
   # æ£€æŸ¥æ–‡ä»¶æƒé™
   make health
   
   # ä½¿ç”¨érootç”¨æˆ·
   # åœ¨.envä¸­é…ç½®
   USER_ID=1000
   GROUP_ID=1000
   ```

2. **ç½‘ç»œå®‰å…¨**
   ```bash
   # é™åˆ¶ç«¯å£è®¿é—®
   # åœ¨docker-compose.ymlä¸­é…ç½®
   ports:
     - "127.0.0.1:8888:8888"
   ```

3. **æ•°æ®ä¿æŠ¤**
   ```bash
   # å®šæœŸå¤‡ä»½
   make backup
   
   # ä½¿ç”¨åŠ å¯†å­˜å‚¨
   # é…ç½®Docker secrets
   ```

## æ•…éšœæ’é™¤

### ğŸš¨ å¸¸è§é—®é¢˜

#### 1. DockeræœåŠ¡æœªè¿è¡Œ

**é”™è¯¯ä¿¡æ¯**:
```
Cannot connect to the Docker daemon
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å¯åŠ¨DockeræœåŠ¡
sudo systemctl start docker

# éªŒè¯DockerçŠ¶æ€
docker info
```

#### 2. GPUä¸å¯ç”¨

**é”™è¯¯ä¿¡æ¯**:
```
GPUä¸å¯ç”¨ï¼Œå°†ä½¿ç”¨CPU
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥NVIDIAé©±åŠ¨
nvidia-smi

# æ£€æŸ¥Docker GPUæ”¯æŒ
docker run --rm --gpus all nvidia/cuda:11.8-base nvidia-smi

# é‡å¯DockeræœåŠ¡
sudo systemctl restart docker
```

#### 3. ç«¯å£å†²çª

**é”™è¯¯ä¿¡æ¯**:
```
Port 8888 is already in use
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
sudo netstat -tlnp | grep :8888

# ä¿®æ”¹ç«¯å£é…ç½®
echo "JUPYTER_PORT=8889" >> .env

# é‡å¯æœåŠ¡
make restart
```

#### 4. å†…å­˜ä¸è¶³

**é”™è¯¯ä¿¡æ¯**:
```
OOMKilled
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å¢åŠ å…±äº«å†…å­˜
echo "SHM_SIZE=4g" >> .env

# è®¾ç½®å†…å­˜é™åˆ¶
echo "MEM_LIMIT=32g" >> .env

# é‡å¯å®¹å™¨
make restart
```

#### 5. ç£ç›˜ç©ºé—´ä¸è¶³

**é”™è¯¯ä¿¡æ¯**:
```
No space left on device
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…ç†Dockerèµ„æº
make prune

# æ¸…ç†ç³»ç»Ÿç¼“å­˜
sudo apt-get clean

# æ£€æŸ¥ç£ç›˜ä½¿ç”¨
df -h
```

### ğŸ” è°ƒè¯•æŠ€å·§

#### 1. è¯¦ç»†æ—¥å¿—

```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
make logs

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs jupyter
docker-compose logs tensorboard
```

#### 2. äº¤äº’å¼è°ƒè¯•

```bash
# è¿›å…¥å®¹å™¨è°ƒè¯•
make shell

# è°ƒè¯•æ¨¡å¼å¯åŠ¨
make debug
```

#### 3. å¥åº·æ£€æŸ¥

```bash
# å…¨é¢å¥åº·æ£€æŸ¥
make health

# æ£€æŸ¥å®¹å™¨çŠ¶æ€
make status

# ç›‘æ§èµ„æºä½¿ç”¨
make monitor
```

#### 4. ç½‘ç»œè¯Šæ–­

```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
docker exec mcp-training-container ping google.com

# æ£€æŸ¥ç«¯å£ç›‘å¬
docker exec mcp-training-container netstat -tlnp
```

### ğŸ“ è·å–å¸®åŠ©

1. **æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯**
   ```bash
   make help
   ```

2. **æ£€æŸ¥ç³»ç»ŸçŠ¶æ€**
   ```bash
   make status
   make health
   ```

3. **æŸ¥çœ‹æ—¥å¿—**
   ```bash
   make logs
   ```

4. **ç¤¾åŒºæ”¯æŒ**
   - æäº¤Issueåˆ°é¡¹ç›®ä»“åº“
   - æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£
   - å‚è€ƒDockerå®˜æ–¹æ–‡æ¡£

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Dockeréƒ¨ç½²æŒ‡å—](Dockeréƒ¨ç½²æŒ‡å—.md)
- [README-Docker](../README-Docker.md)
- [é…ç½®å‚è€ƒæ–‡æ¡£](é…ç½®å‚è€ƒæ–‡æ¡£.md)
- [é˜¿é‡Œäº‘éƒ¨ç½²æ•™ç¨‹](é˜¿é‡Œäº‘éƒ¨ç½²æ•™ç¨‹.md)

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°

å½“é¡¹ç›®æ›´æ–°æ—¶ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åŒæ­¥ï¼š

```bash
# æ›´æ–°é¡¹ç›®
make update

# æˆ–æ‰‹åŠ¨æ›´æ–°
git pull
make build-no-cache
make restart
```

---

**å¿«é€Ÿå‚è€ƒ**:

```bash
# å¼€å‘ç¯å¢ƒä¸€é”®å¯åŠ¨
make dev-setup

# æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤
make help

# è¿è¡Œè®­ç»ƒ
make train

# æŸ¥çœ‹çŠ¶æ€
make status

# æ¸…ç†èµ„æº
make prune
```